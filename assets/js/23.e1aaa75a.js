(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{606:function(t,s,a){"use strict";a.r(s);var n=a(17),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[t._v("#")]),t._v(" 前言")]),t._v(" "),a("p",[t._v("本文记录在项目开发过程中，对于浏览器兼容的一个思考方向。浏览器兼容无非是从样式兼容（CSS），事件兼容（JS），CSS hack三个方面着手。")]),t._v(" "),a("h2",{attrs:{id:"样式兼容方面"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#样式兼容方面"}},[t._v("#")]),t._v(" 样式兼容方面")]),t._v(" "),a("p",[t._v("(1)、 因为不同浏览器的默认样式是存在差异的，我们可以通过Normalize.css来帮助我们统一浏览器样式。当然如果我们的业务需要自定义一些特殊的样式我们可以定制自己的reset.css,通过通配符选择器，全局重置样式, 如下：")]),t._v(" "),a("div",{staticClass:"language-css extra-class"},[a("pre",{pre:!0,attrs:{class:"language-css"}},[a("code",[a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("margin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("padding")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("(2)、当CSS3还没有成为真正的标准的时候，浏览器的厂商就开始支持使用这些属性了。因为当时的css3样式还不稳定，所以浏览器厂商提供了针对某些样式的浏览器前缀，直到现在这些浏览器前缀还在使用。现在我们开发的使用常常借助了css预处理器或者前端自动化构建工具来帮助我们处理，以至于不太熟悉，下面提供一个浏览器-内核-前缀的关系表帮助我们回顾一下：")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("浏览器")]),t._v(" "),a("th",[t._v("内核")]),t._v(" "),a("th",[t._v("前缀")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("IE浏览器")]),t._v(" "),a("td",[t._v("Trident")]),t._v(" "),a("td",[t._v("-ms")])]),t._v(" "),a("tr",[a("td",[t._v("Firefox（火狐）")]),t._v(" "),a("td",[t._v("Gecko")]),t._v(" "),a("td",[t._v("-moz")])]),t._v(" "),a("tr",[a("td",[t._v("Opera")]),t._v(" "),a("td",[t._v("Presto")]),t._v(" "),a("td",[t._v("-o")])]),t._v(" "),a("tr",[a("td",[t._v("Chrome和Safari")]),t._v(" "),a("td",[t._v("webkit")]),t._v(" "),a("td",[t._v("-webkit")])])])]),t._v(" "),a("p",[t._v("(3)、IE9下浏览器不能用opacity")]),t._v(" "),a("div",{staticClass:"language-css extra-class"},[a("pre",{pre:!0,attrs:{class:"language-css"}},[a("code",[a("span",{pre:!0,attrs:{class:"token property"}},[t._v("opacity")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 0.5"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("filter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("alpha")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("opacity = 50"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" //IE6-IE8我们习惯使用filter滤镜属性来进行实现\n")])])]),a("h2",{attrs:{id:"事件兼容方面"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#事件兼容方面"}},[t._v("#")]),t._v(" 事件兼容方面")]),t._v(" "),a("p",[t._v("(1)、 IE中的事件监听器式自有的，因此如果要让脚本在IE浏览器中正常运行的话，就需要使用IE所支持的事件监听器attachEvent。而在支持W3C标准事件的浏览器中，支持addEventListener方法。所以在实际开发中我们会封装一个适配器，如下：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" cusEvent "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 绑定事件")]),t._v("\ncusEvent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("on")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("target"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" type"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" handler")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("target"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("addEventListener"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    target"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("type"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" handler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    target"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("attachEvent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("type"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" handler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 取消事件")]),t._v("\ncusEvent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("cancel")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("target"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" type"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" handler")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("target"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("removeEventListener"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    target"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeEventListener")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("type"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" handler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    target"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("detachEvent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("type"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" handler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("(2)、获取scrollTop 通过 "),a("code",[t._v("document.documentElement.scrollTop")]),t._v(" 兼容非chrome浏览器")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" scrollTop "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("documentElement"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("scrollTop"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v("document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("scrollTop"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("(3)、 Date构造函数，如果使用 'YYYY-MM-DD' 作为参数在个别浏览器中是没有办法生成Date对象实例的。需要将参数格式改为'YYYY/MM/DD'")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" a "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Date")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'2020/05/20'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h2",{attrs:{id:"css-hack"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#css-hack"}},[t._v("#")]),t._v(" CSS hack")]),t._v(" "),a("p",[t._v("通俗来说，用特殊的css写法只对特定的浏览器或浏览器版本生效，这就成为csshack，也是用来处理浏览器兼容的方法。缺点：难理解 难维护 易失败。好处就是简单粗暴，那有没有什么替代方案：特性检测（就是可以检测浏览器有什么相应的特点，根据这个特点给予处理兼容的针对性的class）")]),t._v(" "),a("h3",{attrs:{id:"css中使用的hack"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#css中使用的hack"}},[t._v("#")]),t._v(" css中使用的hack")]),t._v(" "),a("p",[t._v("各浏览器兼容标记表（IE以外的浏览器可以通过内核前缀来hack，参考上面小节）：")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("标记")]),t._v(" "),a("th",[t._v("代码示例")]),t._v(" "),a("th",[t._v("针对的浏览器")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("[*+><]")]),t._v(" "),a("td",[t._v("+background: blue")]),t._v(" "),a("td",[t._v("IE6,7识别")])]),t._v(" "),a("tr",[a("td",[t._v("_")]),t._v(" "),a("td",[t._v("_background: blue")]),t._v(" "),a("td",[t._v("IE6识别")])]),t._v(" "),a("tr",[a("td",[t._v("\\9")]),t._v(" "),a("td",[t._v("background: blue\\9;")]),t._v(" "),a("td",[t._v("IE6,7,8识别")])]),t._v(" "),a("tr",[a("td",[t._v("\\0")]),t._v(" "),a("td",[t._v("background: blue\\0;")]),t._v(" "),a("td",[t._v("IE8识别")])]),t._v(" "),a("tr",[a("td",[t._v("* +html .test{}")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("IE7识别")])])])]),t._v(" "),a("h3",{attrs:{id:"ie条件注释hack-用于html中的"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ie条件注释hack-用于html中的"}},[t._v("#")]),t._v(" IE条件注释hack(用于html中的)")]),t._v(" "),a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--[if IE]>此处内容只有IE可见<![endif]--\x3e")]),t._v(" \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--[if IE 6]>此处内容只有IE6.0可见<![endif]--\x3e")]),t._v(" \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--[if IE 7]>此处内容只有IE7.0可见<![endif]--\x3e")]),t._v(" \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--[if !IE 7]>此处内容只有IE7不能识别，其他版本都能识别，当然要在IE5以上。<![endif]--\x3e")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--[if gt IE 6]> IE6以上版本可识别,IE6无法识别 <![endif]--\x3e")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--[if gte IE 7]> IE7以及IE7以上版本可识别 <![endif]--\x3e")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--[if lt IE 7]> 低于IE7的版本才能识别，IE7无法识别。 <![endif]--\x3e")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--[if lte IE 7]> IE7以及IE7以下版本可识别<![endif]--\x3e")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--[if !IE]>此处内容只有非IE可见<![endif]--\x3e")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);